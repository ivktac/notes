---
date: 2025-07-04
title: Parameter expansion
draft: false
description: 
tags:
  - programming/bash
aliases:
  - bash parameter expansion
permalink: bash-parameter-expansion
lang: uk
---

> [!tldr]
> **Розширення параметрів** дозволяє маніпулювати та трансформувати значення [[Змінні у Bash|змінних]] під час їхнього використання.

## Базовий синтаксис

```bash
"${paremeter:operator}"
```

## Умовне присвоєння значень

**Використання значення за замовчуванням**

- `${parameter:-default}` — повертає `default`, якщо змінна не визначена або порожня
- `${parameter-default}` — повертає `default`, якщо змінна не визначена (але не якщо порожня)

**Присвоєння значення за замовчуванням**

- `${parameter:=default}` — присвоює `default` змінній, якщо вона не визначена або порожня
- `${parameter=default}` — присвоює `default` змінній, якщо вона не визначена

**Альтернативне значення**

- `${parameter:+value}` — повертає `value`, якщо змінна визначена та не порожня
- `${parameter+value}` — повертає `value`, якщо змінна визначена

**Обробка помилок**

- `${parameter:?error}` — виводить повідомлення про помилку та завершує скрипт, якщо змінна не визначена або порожня

## Операції з рядками
### Довжина рядка

`${#parameter}` — повертає кількість символів у рядку

### Підрядки

`${parameter:offset:length}` — витягує підрядок, починаючи з позиції `offset` довжиною `length` символів. Якщо `length` не вказано, повертає все до кінця рядка.

### Заміна підрядків

**Проста заміна**

- `${parameter/pattern/replacement}` — замінює перше входження `pattern` на `replacement`
- `${parameter//pattern/replacement}` — замінює всі входження `pattern` на `replacement`

**Заміна на початку або в кінці**

- `${parameter/#pattern/replacement}` — замінює `pattern` на `replacement` тільки на початку рядка
- `${parameter/%pattern/replacement}` — замінює `pattern` на `replacement` тільки в кінці рядка

### Видалення префіксів та суфіксів

**Видалення префіксів (з початку)**

- `${parameter#pattern}` — видаляє найкоротший префікс, що відповідає `pattern`
- `${parameter##pattern}` — видаляє найдовший префікс, що відповідає `pattern`

**Видалення суфіксів (з кінця)**

- `${parameter%pattern}` — видаляє найкоротший суфікс, що відповідає `pattern`
- `${parameter%%pattern}` — видаляє найдовший суфікс, що відповідає `pattern`

## Зміна регістру

Bash 4.0+ підтримує операції для зміни регістру літер:

**Перетворення у верхній регістр**

- `${parameter^}` — перша літера у верхній регістр
- `${parameter^^}` — всі літери у верхній регістр
- `${parameter^pattern}` — літери, що відповідають `pattern`, у верхній регістр

**Перетворення у нижній регістр**

- `${parameter,}` — перша літера у нижній регістр
- `${parameter,,}` — всі літери у нижній регістр
- `${parameter,pattern}` — літери, що відповідають `pattern`, у нижній регістр

## Робота з масивами

Розширення параметрів також працює з масивами:

- `${array[@]}` — всі елементи масиву
- `${#array[@]}` — кількість елементів у масиві
- `${array[@]:offset:length}` — підмасив
- `${array[@]#pattern}` — видалення префіксу з кожного елемента
- `${array[@]%pattern}` — видалення суфіксу з кожного елемента

## Спеціальні операції

### Непряме посилання

`${!parameter}` — використовує значення `parameter` як назву іншої змінної та повертає її значення. Це рідко використовується і може ускладнити читання коду.

### Список назв змінних

`${!prefix*}` або `${!prefix@}` — повертає список назв змінних, що починаються з `prefix`


> [!tip] 
> Для складних операцій з рядками краще використовувати  [[sed]], [[awk]], [[cut]], [[paste]] або інших утиліт.

## Див. також

- [[Bash]]
- [[Змінні у Bash]]
- [[Масиви у bash]]
- [[Метасимволи bash]]

## Корисні джерела


- https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html